
# Skip newer or system-specific unmatched options.
IgnoreUnknown AddKeysToAgent,UseKeychain

HashKnownHosts no

{{- if .work }}
Include ~/.ssh/akamai
Include ~/.ssh/linode
{{- end }}

Host github-rishid
    Hostname github.com
    User git
    UpdateHostKeys yes
    IdentityFile ~/.ssh/github_rishid
    IdentitiesOnly yes

Host github-akamai
    Hostname github.com
    User git
    UpdateHostKeys yes
    IdentityFile ~/.ssh/github_akamai
    IdentitiesOnly yes

Host github github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519
    IdentitiesOnly yes

Host 100.80.*.*
    User root
    StrictHostKeyChecking no
    IdentityFile ~/.ssh/akanebula.key
    # vtastic gateway NAT ip - clone
    ProxyCommand ssh -oStrictHostKeyChecking=no -W %h:%p root@198.18.255.27

Host linode
    Hostname 45.79.138.115
    User root
    IdentityFile ~/.ssh/id_ecdsa

# 12/6/23 Exclude github as cannot reuse socket since user, host and port are same except key
Host !github.com
    # Accelerate connections by reusing existing connections to the same host.
    ControlMaster auto
    ControlPath ~/.ssh/controlmasters/%r@%h:%p
    ControlPersist 60m

    # Allow storing passphrases in the macOS keychain.
    AddKeysToAgent yes
{{- if (eq .chezmoi.os "darwin") }}
    UseKeychain yes
{{- end }}

    # Keep the connection temporarily open by sending a data every few minutes.
    ServerAliveCountMax 6
    ServerAliveInterval 300
